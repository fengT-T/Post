# 验证器（策略模式）

> 定义一系列算法，将每一个算法封装起来，并让它们可以相互替换。策略模式让算法独立于使用它的客户而变化，也称为政策模式(Policy)。

说的简单点就是有很多算法可以实现某一个功能，但是呢如果把这些代码`硬编码`到一个类里面然后通过`if-else`来选择那就不装逼了。但是你如果用装逼技巧封装起来，别人调用的时候你告诉他只要替换成你想用的函数，这逼就装就到位了（战术后仰）。在`js`里面常见的就验证器就运用了这种思路，当然为了防止被`java c艹`程序员喷：你TM这也能算策略模式么，我决定管这个装逼技巧叫`验证器模式`。

## 表单验证

一个普通的表单验证可能是这样的
``` javascript
const userName = 'didi'
if (userName) {
  throw new Error('用户名不能为空')
} else if (userName.length >= 6) {
  throw new Error('太长了')
}

```
但是这样的硬编码明显不够,回忆一下一个普通的验证器可以是下面这样的，验证函数之间可以相互替换组合，而不是硬编码到验证类里面。

<<< @/装逼/Strategy/test.js

Validator 的话可以是这样的

<<< @/装逼/Strategy/Validator.js

## 装逼小技巧

Validator 类负责调用提供的验证函数，方法和调用类之间解耦，方法之间可以自由组合替换这样我们装逼的目的就达到了，而且测试起来异常方便。

不过还是有一些局限性：
 - 不过这中对使用的人要求比较高，需要了解这些验证函数是如何工作的
 - 下班比较晚