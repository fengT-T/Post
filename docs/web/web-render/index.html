<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网页渲染 | T-T</title>
    <meta name="description" content="fengT-T的Github Page">
    
    
    <link rel="preload" href="/Post/assets/css/0.styles.056d5d19.css" as="style"><link rel="preload" href="/Post/assets/js/app.7ac1ac38.js" as="script"><link rel="preload" href="/Post/assets/js/2.d6d61d86.js" as="script"><link rel="preload" href="/Post/assets/js/3.40229b1d.js" as="script"><link rel="prefetch" href="/Post/assets/js/10.5913aeed.js"><link rel="prefetch" href="/Post/assets/js/11.b4f47256.js"><link rel="prefetch" href="/Post/assets/js/12.c39b0203.js"><link rel="prefetch" href="/Post/assets/js/13.eda573fa.js"><link rel="prefetch" href="/Post/assets/js/14.2796c1a5.js"><link rel="prefetch" href="/Post/assets/js/15.14844703.js"><link rel="prefetch" href="/Post/assets/js/16.91d7677b.js"><link rel="prefetch" href="/Post/assets/js/17.a22bf5da.js"><link rel="prefetch" href="/Post/assets/js/18.40800084.js"><link rel="prefetch" href="/Post/assets/js/19.0b81b767.js"><link rel="prefetch" href="/Post/assets/js/20.57e9c152.js"><link rel="prefetch" href="/Post/assets/js/4.30c78e57.js"><link rel="prefetch" href="/Post/assets/js/5.a26e78b0.js"><link rel="prefetch" href="/Post/assets/js/6.f8fa4530.js"><link rel="prefetch" href="/Post/assets/js/7.60513c3c.js"><link rel="prefetch" href="/Post/assets/js/8.433b4598.js"><link rel="prefetch" href="/Post/assets/js/9.05799667.js">
    <link rel="stylesheet" href="/Post/assets/css/0.styles.056d5d19.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Post/" class="home-link router-link-active"><!----> <span class="site-name">T-T</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Post/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/Post/Other/" class="nav-link">Other</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">科学装逼</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Post/装逼/" class="nav-link">编程装逼技巧</a></li><li class="dropdown-item"><!----> <a href="/Post/web/" class="nav-link router-link-active">web装逼技巧</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xtuJSer/CoCoMusic" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CoCoMusic
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Post/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/Post/Other/" class="nav-link">Other</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">科学装逼</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Post/装逼/" class="nav-link">编程装逼技巧</a></li><li class="dropdown-item"><!----> <a href="/Post/web/" class="nav-link router-link-active">web装逼技巧</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/xtuJSer/CoCoMusic" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CoCoMusic
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网页渲染</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Post/web/web-render/#构建渲染树" class="sidebar-link">构建渲染树</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Post/web/web-render/#layout" class="sidebar-link">Layout</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Post/web/web-render/#painting" class="sidebar-link">Painting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Post/web/web-render/#光栅化" class="sidebar-link">光栅化</a></li><li class="sidebar-sub-header"><a href="/Post/web/web-render/#分层" class="sidebar-link">分层</a></li></ul></li><li><a href="/Post/web/web-render/#composite" class="sidebar-link">Composite</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Post/web/web-render/#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="网页渲染"><a href="#网页渲染" aria-hidden="true" class="header-anchor">#</a> 网页渲染</h1> <p>用一张经典的图来表示网页的渲染过程
<img src="/Post/assets/img/render.5ce45ba0.png" alt="WebKit 主流程"></p> <p><img src="/Post/assets/img/render-gecko.b074db49.jpg" alt="Mozilla 的 Gecko 呈现引擎主流程"></p> <p>就从这两张图开始装起，主要的渲染过程有</p> <ul><li>构建渲染树(<code>Render Tree</code>)</li> <li><code>Layout</code>：根据生成的渲染树，进行<code>Layout</code>（布局，排版），得到节点的几何信息（位置，大小）</li> <li><code>Painting</code>（绘制）:根据渲染树以及<code>Layout</code>得到的几何信息，得到节点的绝对像素，顔色</li> <li><code>Composite</code>： 根据一些规则（一般是同一坐标空间属于同一渲染层，我们可以在<code>chrome devtools layers</code>看到）将渲染树分离成一些合成层（<code>layers</code>）</li></ul> <h2 id="构建渲染树"><a href="#构建渲染树" aria-hidden="true" class="header-anchor">#</a> 构建渲染树</h2> <p>解析HTML，生成DOM树，解析CSS，生成CSSOM树， DOM 树与 CSSOM 树合并后形成渲染树。
为构建渲染树，浏览器大体上完成了下列工作：</p> <p><img src="/Post/assets/img/render-tree-construction.0c389301.png" alt="构建渲染树"></p> <ol><li><p>从 <code>DOM</code> 树的根节点开始遍历每个可见节点。</p> <ul><li>某些节点不可见（例如脚本标记、元标记等），因为它们不会体现在渲染输出中，所以会被忽略。</li> <li>某些节点通过 <code>CSS</code> 隐藏，因此在渲染树中也会被忽略，例如，上例中的 <code>span</code> 节点不会出现在渲染树中，因为有一个显式规则在该节点上设置了<code>display: none</code>属性。</li></ul></li> <li><p>对于每个可见节点，为其找到适配的 <code>CSSOM</code> 规则并应用它们。</p></li> <li><p>发射可见节点，连同其内容和计算的样式。</p></li></ol> <div class="tip custom-block"><p>简单提一句，请注意 <code>visibility: hidden</code> 与 <code>display: none</code> 是不一样的。前者隐藏元素，但元素仍占据着布局空间（即将其渲染成一个空框），而后者 (<code>display: none</code>) 将元素从渲染树中完全移除，元素既不可见，也不是布局的组成部分。</p></div> <h2 id="layout"><a href="#layout" aria-hidden="true" class="header-anchor">#</a> Layout</h2> <p>有了渲染树，我们就可以进入<code>Layout(布局)</code>阶段。到目前为止，我们计算了哪些节点应该是可见的以及它们的样式，但我们尚未计算它们在设备视口内的确切位置和大小,这就是“布局”阶段，也称为“自动重排”。</p> <p>为弄清每个对象在网页上的确切大小和位置，浏览器从渲染树的根节点开始进行遍历。让我们考虑下面这样一个简单的实例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Critial Path: Hello world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 50%</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 50%</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hello world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上网页的正文包含两个嵌套 <code>div</code>：第一个（父）<code>div</code> 将节点的显示尺寸设置为视口宽度的 50%， 父 <code>div</code> 包含的第二个 <code>div</code>, 将其宽度设置为其父项的 50%；即视口宽度的 25%。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmgAAAEZCAMAAAAUpymCAAAC9FBMVEVMaXEAAAAAAAAAAABAQECAgID///+/v7+6urrn5+epqanBwcGDg4OFhYWioqL19fXGxsbs7Oz6+vri4uKurq6goKDU1NTb29vu7u74+Pi4uLjLy8vx8fHl5eXz8/OwsLBra2ubm5tmZmbS0tKsrKx3d3dwcHC8vLyzs7OWlpZ0dHSnp6eIiIiUlJRoaGiRkZGKioqYmJjExMRycnLp6enIyMiPj4/X19dtbW2kpKSMjIx+fn79/f3Z2dl5eXnQ0NB8fHydnZ3d3d3Nzc21tbXg4ODsz8/KfHzWmprapKTNhITw29unJSWYAADMgICsMTEgAACMPj6yQUHmwcGfAAB5AADLf3+NOjqQKCibBga/YGDFcHCiFxf36+vRjIz89/f9+/vcqKjhtLS4UFDPiIg0OT1ocXrP4vO9zdvD1OPM3u7I2urO4PHC0+LH2Oe2xdLA0N6cpq+vvMi4xtR3en3K3O2xv8tzdXe0ws+Pl52DiY5vcXO6ydZ7f4KeqbKnsr2AhYmTm6KotL5/g4eGjJFydHahrLWOlZuMk5mIjpSIlaCtucWjr7lqamptbm+ptcCbpKyUnKR1eHqWn6hAPTOAeWa7ytiKkZd9goX/8sz77snb0bTz58Tg1rfu4sHZz7PEvKWEgnqhnI2cmIq7tJ6WkoZ5d3OQjYLVzLB9e3Vwb23BuaP98MvSya53dnHx5cOkn4+4sZ2MiX+xq5jGvqa/t6H26sZzcm/i17nq373d07Xm27zJwKenoZGUkIWtp5b47MeAfnfLwqns4b+Jhn21rpvNxKupo5OYlIe/tZnPxKbv47/XzKzf1LLn27lgW02gmICIgW1IRDpybFvHvZ9oY1NMSD3z58KclH2EfWqMhXC4r5OQiXOwp41XU0WWjnhEQTbb0K8cGxYEBANcV0oXFhIICAYkIh3j17Z5c2G8spaon4YgHhoMCwo8OTA2MysQDw0uLCTDuZxsZlbTyKlQTEBkX1AoJiC0q5Cso4p7h5EAAADyqG2AAAAA/HRSTlMAV3////////////////////////////////////////////////////////////////////////////////////////////////////////////8I0////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2dULVUsAAAON0lEQVR4AezStwHCQBAAsI9Hhv23peQ7kq+yNIMKOwYAALVBkro862ngNa31MSHF6G2JNgNSTNEQDdHYimggGqKBaIiGaByO8ZVT8EM05jm+cbkG+dG43YOPo/F4smtX+8ljUQDFr1g4EQiQNoSw0SLBKYQQqI27u7//M0wJ4+7ycf441+u3I+foWvxuGLoJxZKVNKFcAVOvHP+vVnX7onAJ4KSsUg0olt1SXfcaZZTfGpriShNotc1UB7peo5fIm1w1QBcLUn2z28kPGnIBlc6wN/KbUBgnJpOxTGf8Zio0ZZ6ChbfkasW1XIK2nrEJYNseY/a7NPwKbOZobSuE6RZy6x0kvRBFhfbbBRtoDKFdZzyJ/xjQi9h3WgHJvsnhBtDF6Xpa/AVbSsBNnt9BhaYMhtzKLa7sTV9iJXSPIDM7hIcemjSBrJijFfEXKpL+3deoKjQlOWdyA3upGpIyjjSu5dav6tFdR6MpBnCzJbA4fUn1AVuW/A4qNGUnl14V6m1M7wLIDKEmK4tdNOzBvVSg6nUZr4C0d8/0CriWGooK7Xdwpd8Dxldgza/TJX9//M8vsvM6Goz6k+LDMGeylKx9vX38crgAulI2UFRov0MiZwK5JNiWJ4kywKEB1egCmNfrnt/QgG5b1hkbLdoBtbY0+auo0JSq6kmF9k+4E5c/QYX21NPPoPy6Vpufpzz73PM/G1pc2QsvvvgSf5KivPTiiy/Hrf1EaHFlj1RofwEV2qO4tR+E9sqrx8pir730BHid/6+XngCvvRiLW/tOaG+8+eIT5i3+v158wrz9vYn2zrtnOtHSlsOvcKw0P5K94Nc9WBqx5gYwoGKZ5zXR3n3vqR+coz3//ruPf5/fOdpv2NazF5cfyQ34dfdzTm4mMKpDKzqXc7TYB09/+BNXnR9+9MFPXAwof0Ud28zpFm8wPaPQXnjm45+5vfHJpy+fTWh20sqUgbsiZf2o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" alt="实例"></p> <p>布局流程的输出是一个“盒模型”，它会精确地捕获每个元素在视口内的确切位置和尺寸：所有相对测量值都转换为屏幕上的绝对像素。</p> <h2 id="painting"><a href="#painting" aria-hidden="true" class="header-anchor">#</a> Painting</h2> <h3 id="光栅化"><a href="#光栅化" aria-hidden="true" class="header-anchor">#</a> 光栅化</h3> <p>最后，既然我们知道了哪些节点可见、它们的计算样式以及几何信息，我们终于可以将这些信息传递给最后一个阶段：将渲染树中的每个节点转换成屏幕上的实际像素。这一步通常称为“绘制”或“栅格化”或“光栅化”。</p> <p><img src="/Post/assets/img/200px-Pixels_covered_by_a_triangle.cb2890db.png" alt=""></p> <p>把近视眼镜取掉看起来就是一个三角形。简单点的说就是把你上一步得到的几何数据包括（颜色、图像、边框和阴）填充成屏幕可以显示的像素</p> <h3 id="分层"><a href="#分层" aria-hidden="true" class="header-anchor">#</a> 分层</h3> <p>绘制过程是在多个层上完成的，（可以类比为 ps 的图层），一些常见的会导致分层的因素如下：</p> <ul><li>根元素（HTML）</li> <li>有明确的定位属性（relative、fixed、sticky、absolute）</li> <li>透明的（opacity 小于 1）</li> <li>有 CSS 滤镜（fliter）</li> <li>有 CSS transform 属性（不为 none）</li> <li>有 CSS reflection 属性</li> <li>当前有对于 opacity、transform、fliter、backdrop-filter 应用动画</li> <li>等等</li></ul> <p><code>Chromium devtools layers</code>工具显示这个沙雕博客表面上一共两个渲染层
fixed的顶栏和fixed侧边栏</p> <p><img src="/Post/assets/img/Screenshot_20190327_000731.926a9c5c.png" alt="google chrome devtools layers"></p> <h2 id="composite"><a href="#composite" aria-hidden="true" class="header-anchor">#</a> Composite</h2> <p>混成就是将上一步得到的多个层合并成一个图层然后显示到屏幕上</p> <h2 id="参考"><a href="#参考" aria-hidden="true" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction?hl=zh-cn" target="_blank" rel="noopener noreferrer">渲染树构建、布局及绘制
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://jartto.wang/2017/09/29/expand-on-performance-composite/" target="_blank" rel="noopener noreferrer">composite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://taobaofed.org/blog/2016/04/25/performance-composite/" target="_blank" rel="noopener noreferrer">万能的淘宝<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Post/assets/js/app.7ac1ac38.js" defer></script><script src="/Post/assets/js/2.d6d61d86.js" defer></script><script src="/Post/assets/js/3.40229b1d.js" defer></script>
  </body>
</html>
